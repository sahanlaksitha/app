<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Invite Link Creator</title>
  <style>
    /* CSS code remains the same */
  </style>
</head>
<body>
  <div class="container">
    <h2>Create Telegram Invite Link</h2>
    <input type="text" id="userName" placeholder="Enter User Name" />
    <button onclick="createInviteLink()">Generate Link</button>
    <div class="result" id="result"></div>
    <div class="error" id="error"></div>
  </div>

  <script>
    const inviteLinks = {};

    async function createInviteLink() {
      const userName = document.getElementById('userName').value.trim();
      const errorDiv = document.getElementById('error');
      const resultDiv = document.getElementById('result');
      errorDiv.textContent = '';
      resultDiv.textContent = '';

      if (!userName) {
        errorDiv.textContent = 'Please enter a user name.';
        return;
      }

      if (inviteLinks[userName]) {
        resultDiv.innerHTML = `
          User "${userName}" already has an invite link: 
          <a href="${inviteLinks[userName].link}" target="_blank">${inviteLinks[userName].link}</a><br>
          Number of users joined via this link: ${inviteLinks[userName].joins || 0}`;
        return;
      }

      const BOT_TOKEN = ''8080972949:AAHeqF2352do546naypN2FS-p_BNagw2keU''; // Replace with your bot token
      const CHAT_ID = 'tipstream'; // Replace with your channel username or ID
      const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/createChatInviteLink`;

      const payload = {
        chat_id: CHAT_ID,
        name: `${userName}'s Invite Link`,
        expire_date: 0,
        member_limit: 1
      };

      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(payload)
        });

        const data = await response.json();

        if (data.ok) {
          inviteLinks[userName] = {
            link: data.result.invite_link,
            joins: 0
          };

          resultDiv.innerHTML = `
            Invite link created for "${userName}": 
            <a href="${data.result.invite_link}" target="_blank">${data.result.invite_link}</a><br>
            Number of users joined via this link: 0`;
        } else {
          errorDiv.textContent = 'Error creating invite link.';
        }
      } catch (error) {
        errorDiv.textContent = 'Error connecting to Telegram API.';
        console.error(error);
      }
    }

    async function updateJoinCount(userName) {
      if (!inviteLinks[userName]) return;

      const BOT_TOKEN = 'YOUR_BOT_TOKEN';
      const API_URL = `https://api.telegram.org/bot${BOT_TOKEN}/getChatInviteLinkCounts`;

      try {
        const response = await fetch(API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({ chat_id: 'YOUR_CHAT_ID' })
        });

        const data = await response.json();

        if (data.ok && Array.isArray(data.result)) {
          const userLink = inviteLinks[userName].link;
          const linkData = data.result.find(item => item.invite_link === userLink);
          if (linkData) {
            inviteLinks[userName].joins = linkData.member_count || 0;
          }
        }
      } catch (error) {
        console.error('Error updating join count:', error);
      }
    }
  </script>
</body>
</html>
